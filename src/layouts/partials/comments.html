<div id="comments-widget" class="max-w-2xl mx-auto mt-10">
  <h2 class="text-lg font-medium mb-4">Comments</h2>

  <form id="commentForm" class="space-y-2 bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-800">
    <input type="hidden" id="siteId" value="{{ .Site.BaseURL }}">
    <input type="hidden" id="postSlug" value="{{ .File.BaseFileName }}">

    <div class="grid grid-cols-2 gap-2">
      <input id="author" class="px-3 py-2 rounded-md border border-gray-200 dark:border-gray-700 bg-transparent text-sm" placeholder="Name" required>
      <input id="email" type="email" class="px-3 py-2 rounded-md border border-gray-200 dark:border-gray-700 bg-transparent text-sm" placeholder="Email" required>
    </div>

    <textarea id="content" rows="4" class="w-full px-3 py-2 rounded-md border border-gray-200 dark:border-gray-700 bg-transparent text-sm" placeholder="Write a comment..." required></textarea>

    <input type="hidden" id="turnstileToken" value="">

    <!-- Cloudflare Turnstile widget -->
    <div
      class="cf-turnstile"
      data-sitekey="0x4AAAAAAABCp0ljCLkn6iFC"
      data-callback="onTurnstileSuccess"
    ></div>

    <div class="flex items-center gap-2">
      <button type="submit" id="submitBtn" class="px-4 py-2 rounded-md bg-gray-100 dark:bg-gray-700 text-sm">Post comment</button>
      <span id="status" class="text-xs text-gray-500 dark:text-gray-400"></span>
    </div>
  </form>

  <div id="comments" class="mt-6 space-y-3"></div>
</div>

<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
<script src="{{ "js/comments.js" | relURL }}"></script>
